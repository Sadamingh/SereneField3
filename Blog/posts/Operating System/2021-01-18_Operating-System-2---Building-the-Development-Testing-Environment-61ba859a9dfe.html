<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Operating System 2 | Building the Development/Testing Environment</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Operating System 2 | Building the Development/Testing Environment</h1>
</header>
<section data-field="subtitle" class="p-summary">
Series: Operating System
</section>
<section data-field="body" class="e-content">
<section name="3afd" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="ba0c" id="ba0c" class="graf graf--h3 graf--leading graf--title">Operating System 2 | Building the Development/Testing Environment</h3><figure name="45ba" id="45ba" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="0*FgnG1aiBssrIOlEN.png" data-width="1508" data-height="794" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/0*FgnG1aiBssrIOlEN.png"></figure><ol class="postList"><li name="e106" id="e106" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">Vagrant Installation</strong></li></ol><p name="ece5" id="ece5" class="graf graf--p graf-after--li">Let’s start by assuming that you have no Vagrant installed, you can go to the official website of Vagrant and download its <a href="https://www.vagrantup.com/downloads.html" data-href="https://www.vagrantup.com/downloads.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">latest version</a>. You may also need to download <a href="https://www.virtualbox.org/wiki/Downloads" data-href="https://www.virtualbox.org/wiki/Downloads" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">Virtual Box</a>.</p><p name="30ef" id="30ef" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">2. Build the Top-level Directory</strong></p><p name="b590" id="b590" class="graf graf--p graf-after--p">Now, let’s create a top-level directory that we plan to use for this series,</p><pre name="f578" id="f578" class="graf graf--pre graf-after--p">$ cd ~<br>$ mkdir CS6200<br>$ cd CS6200<br>$ mkdir pr1<br>$ mkdir pr3<br>$ mkdir pr4</pre><p name="455c" id="455c" class="graf graf--p graf-after--pre">Download and save the Vagrantfile from this <a href="https://gist.github.com/Sadamingh/4866874eb05cf1ae92de6d8ada756a26" data-href="https://gist.github.com/Sadamingh/4866874eb05cf1ae92de6d8ada756a26" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">link</a>.</p><pre name="61b4" id="61b4" class="graf graf--pre graf-after--p">$ curl https://gist.githubusercontent.com/Sadamingh/4866874eb05cf1ae92de6d8ada756a26/raw/1258f3ba822d382c42096e65e33c40702a369c56/Vagrantfile &gt; Vagrantfile</pre><p name="d307" id="d307" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">3. Set up the Virtual Machine</strong></p><p name="e310" id="e310" class="graf graf--p graf-after--p">From the directory with a <code class="markup--code markup--p-code">Vagrantfile</code> , we can use,</p><pre name="f6be" id="f6be" class="graf graf--pre graf-after--p">$ vagrant up</pre><p name="d090" id="d090" class="graf graf--p graf-after--pre">to run the virtual machine. Note that <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">ubuntu-18.04</strong></code><strong class="markup--strong markup--p-strong"> </strong>may be installed for the first time you run this command, so don’t worry and wait for the stuff like <code class="markup--code markup--p-code">default: Progress: 35% (Rate: 1702k/s, Estimated time remaining: 0:19:29</code> to complete.</p><p name="c9ab" id="c9ab" class="graf graf--p graf-after--p">After configuration, the VM will automatically boot from the VirtualBox and ask for the username and password. The login information should be,</p><pre name="d0b9" id="d0b9" class="graf graf--pre graf-after--p">username: vagrant<br>password: vagrant</pre><figure name="88f0" id="88f0" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*absAFmCQusYaWqg7SylZoA.png" data-width="1408" data-height="662" src="https://cdn-images-1.medium.com/max/800/1*absAFmCQusYaWqg7SylZoA.png"></figure><p name="5191" id="5191" class="graf graf--p graf-after--figure">To use the terminal in our computer instead of the shell in VirtualBox, we can use the <code class="markup--code markup--p-code">vagrant ssh</code> connection,</p><pre name="2841" id="2841" class="graf graf--pre graf-after--p">$ vagrant ssh</pre><p name="bfa8" id="bfa8" class="graf graf--p graf-after--pre">If we want to find the directory we have built, we can go to the <code class="markup--code markup--p-code">/vagrant</code> path,</p><pre name="103a" id="103a" class="graf graf--pre graf-after--p">$ cd /vagrant<br>$ ls</pre><p name="1ed8" id="1ed8" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">4. Test the Environment</strong></p><p name="54e8" id="54e8" class="graf graf--p graf-after--p">How can we verify whether or not our environments are right? In this case, we are going to test our environment by <a href="https://github.com/nemequ/munit" data-href="https://github.com/nemequ/munit" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">munit</a> and <a href="https://github.com/clibs/cmocka" data-href="https://github.com/clibs/cmocka" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">cmocka</a>.</p><p name="0262" id="0262" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(1) Test by </strong><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">munit</strong></code></p><p name="70a6" id="70a6" class="graf graf--p graf-after--p">To compile munit, first of all, we have to clone it from Github,</p><pre name="ebc2" id="ebc2" class="graf graf--pre graf-after--p">$ cd ~<br>$ git clone <a href="https://github.com/nemequ/munit" data-href="https://github.com/nemequ/munit" class="markup--anchor markup--pre-anchor" rel="noopener" target="_blank">https://github.com/nemequ/munit</a></pre><p name="4a7f" id="4a7f" class="graf graf--p graf-after--pre">Note that we should install <code class="markup--code markup--p-code">build-essential</code> to use the <code class="markup--code markup--p-code">make</code> command,</p><pre name="1cc7" id="1cc7" class="graf graf--pre graf-after--p">$ sudo apt-get install build-essential</pre><p name="0d07" id="0d07" class="graf graf--p graf-after--pre">After that, we go into the directory of munit and compile the files by,</p><pre name="1c72" id="1c72" class="graf graf--pre graf-after--p">$ cd munit<br>$ make</pre><p name="f241" id="f241" class="graf graf--p graf-after--pre">To run our tests, we should use,</p><pre name="d882" id="d882" class="graf graf--pre graf-after--p">$ ./example</pre><p name="14bd" id="14bd" class="graf graf--p graf-after--pre">The output should be,</p><figure name="146d" id="146d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*hlnuCORxHoIiDlEJ_RU6mA.png" data-width="1858" data-height="440" src="https://cdn-images-1.medium.com/max/800/1*hlnuCORxHoIiDlEJ_RU6mA.png"></figure><p name="7f60" id="7f60" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">(2) Test by </strong><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">cmocka</strong></code></p><p name="4f2f" id="4f2f" class="graf graf--p graf-after--p">To test by cmoka, we have to clone it from GitHub,</p><pre name="92af" id="92af" class="graf graf--pre graf-after--p">$ cd ~<br>$ git clone https://git.cryptomilk.org/projects/cmocka.git/</pre><p name="c29c" id="c29c" class="graf graf--p graf-after--pre">Also, we have to install <code class="markup--code markup--p-code">cmake</code> for building this program,</p><pre name="701a" id="701a" class="graf graf--pre graf-after--p">$ sudo snap install cmake --classic</pre><p name="d761" id="d761" class="graf graf--p graf-after--pre">Then, let’s go into the directory <code class="markup--code markup--p-code">cmocka</code> and make a new directory named <code class="markup--code markup--p-code">build</code>. Then direct to this <code class="markup--code markup--p-code">build</code> directory,</p><pre name="e8fc" id="e8fc" class="graf graf--pre graf-after--p">$ cd cmocka<br>$ mkdir build<br>$ cd build</pre><p name="a66d" id="a66d" class="graf graf--p graf-after--pre">In the <code class="markup--code markup--p-code">build</code> directory, we need to configure the compilation, using <code class="markup--code markup--p-code">CMake</code>.</p><pre name="5c39" id="5c39" class="graf graf--pre graf-after--p">$ <code class="markup--code markup--pre-code">cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Debug ..<br>$ make</code></pre><p name="1df3" id="1df3" class="graf graf--p graf-after--pre">If you want to install <code class="markup--code markup--p-code">cmocka</code> after compilation, run,</p><pre name="4b2f" id="4b2f" class="graf graf--pre graf-after--p">$ make install</pre><p name="b962" id="b962" class="graf graf--p graf-after--pre">For testing <code class="markup--code markup--p-code">comcka</code> , you should run,</p><pre name="dd08" id="dd08" class="graf graf--pre graf-after--p">$ make test</pre><p name="1ae7" id="1ae7" class="graf graf--p graf-after--pre">You should find the following line in the output,</p><pre name="cd8f" id="cd8f" class="graf graf--pre graf-after--p">...<br>100% tests passed, 0 tests failed out of 47<br>...</pre><p name="e245" id="e245" class="graf graf--p graf-after--pre">Then the environment is successfully built on your computer.</p><p name="d023" id="d023" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">5. Remote VS Code by SSH Connection</strong></p><p name="3fda" id="3fda" class="graf graf--p graf-after--p">We may get bored with vim because it is not easy for our development. Instead, we can use the VS Code as our IDE for this series. In order to use the Vs Code, we have to remotely connect to the virtual machine <code class="markup--code markup--p-code">vagrant</code> .</p><p name="6e10" id="6e10" class="graf graf--p graf-after--p">From the plugins of the VS Code, we should search for <code class="markup--code markup--p-code">Remote — SSH</code> and then install it on our computer,</p><figure name="9a2d" id="9a2d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ypHiQU-1R5Y7vLpWZTk7SQ.png" data-width="2774" data-height="1086" src="https://cdn-images-1.medium.com/max/800/1*ypHiQU-1R5Y7vLpWZTk7SQ.png"></figure><p name="dc02" id="dc02" class="graf graf--p graf-after--figure">After the installation, from the bottom-left corner of the VS Code, we can then find the following button of “Open a Remote Window”,</p><figure name="e9ad" id="e9ad" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*2gTsq3w86fVuFYrBFI9uCw.png" data-width="794" data-height="64" src="https://cdn-images-1.medium.com/max/800/1*2gTsq3w86fVuFYrBFI9uCw.png"></figure><p name="da89" id="da89" class="graf graf--p graf-after--figure">Then we click on this button and then choose “Remote-SSH: Open Configuration File …” and then choose the configuration file in our home directory.</p><p name="a5af" id="a5af" class="graf graf--p graf-after--p">Now, we should open a new terminal and go to the directory that we have the <code class="markup--code markup--p-code">Vagrantfile</code>,</p><pre name="4bff" id="4bff" class="graf graf--pre graf-after--p">$ cd ~/CS6200<br>$ vagrant ssh-config</pre><p name="af21" id="af21" class="graf graf--p graf-after--pre">We should then have the following output,</p><pre name="5336" id="5336" class="graf graf--pre graf-after--p">Host default //*note you can change this to Vagrant<br>HostName 127.0.0.1<br>User vagrant<br>Port 2222<br>UserKnownHostsFile /dev/null<br>StrictHostKeyChecking no<br>PasswordAuthentication no<br>IdentityFile ///*this should be your path for the key<br>IdentitiesOnly yes<br>LogLevel FATAL</pre><p name="87c5" id="87c5" class="graf graf--p graf-after--pre">Copy this result and paste it to the configuration file, then save the configuration file. From the left bar in the VS Code, choose the remote machine you have set up,</p><figure name="6b88" id="6b88" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*gfgfaXKsn0RNuyyIHk5IJg.png" data-width="1514" data-height="420" src="https://cdn-images-1.medium.com/max/800/1*gfgfaXKsn0RNuyyIHk5IJg.png"></figure><p name="b249" id="b249" class="graf graf--p graf-after--figure">Click on the “Connect to the host in new window” button,</p><figure name="4844" id="4844" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*LloNyN9AW01d56bAGgIuyA.png" data-width="1204" data-height="176" src="https://cdn-images-1.medium.com/max/800/1*LloNyN9AW01d56bAGgIuyA.png"></figure><p name="82d3" id="82d3" class="graf graf--p graf-after--figure">Now, we can work in the Vagrant with VS Code!</p><figure name="8d1d" id="8d1d" class="graf graf--figure graf-after--p graf--trailing"><img class="graf-image" data-image-id="1*4zRKHQ7MHgBNpEDaKIPRhg.png" data-width="1480" data-height="78" src="https://cdn-images-1.medium.com/max/800/1*4zRKHQ7MHgBNpEDaKIPRhg.png"></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@adamedelweiss" class="p-author h-card">Adam Edelweiss</a> on <a href="https://medium.com/p/61ba859a9dfe"><time class="dt-published" datetime="2021-01-18T03:41:50.540Z">January 18, 2021</time></a>.</p><p><a href="https://medium.com/@adamedelweiss/operating-system-2-building-the-development-testing-environment-61ba859a9dfe" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 15, 2021.</p></footer></article></body></html>
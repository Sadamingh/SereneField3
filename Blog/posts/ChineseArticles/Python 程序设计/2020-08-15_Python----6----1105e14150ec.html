<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Python程序设计6 字典</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Python程序设计6 字典</h1>
</header>
<section data-field="subtitle" class="p-summary">
系列：Python程序设计
</section>
<section data-field="body" class="e-content">
<section name="5a4a" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="d877" id="d877" class="graf graf--h3 graf--leading graf--title">Python程序设计6 字典</h3><figure name="66e6" id="66e6" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*nMQTiDVkQq7j6ZlqQEKLbQ.jpeg" data-width="2689" data-height="1513" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*nMQTiDVkQq7j6ZlqQEKLbQ.jpeg"></figure><p name="0a9e" id="0a9e" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">一、字典</strong></p><ol class="postList"><li name="e6f4" id="e6f4" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">字典</strong></li></ol><p name="608e" id="608e" class="graf graf--p graf-after--li">字典是关键词 Key 和数值 Value 的组合，一个关键词对应一个数值。生活中有很多这种结构，例如电话本中的姓名和电话，账户的用户名和密码等等。</p><p name="2d56" id="2d56" class="graf graf--p graf-after--p">字典数据的特征有三点：</p><ul class="postList"><li name="2d63" id="2d63" class="graf graf--li graf-after--p">由大括号 braces 开始并且由大括号结束</li><li name="92d2" id="92d2" class="graf graf--li graf-after--li">关键词和数值之间用一个冒号 colon 分隔</li><li name="9194" id="9194" class="graf graf--li graf-after--li">两对组合之间通过一个逗号 comma 分隔</li></ul><p name="e4ef" id="e4ef" class="graf graf--p graf-after--li">因此，字典的一般形式如下：</p><pre name="a25f" id="a25f" class="graf graf--pre graf-after--p">dic = {key1: val1, key2: val2, key3: val3, key4: val4, ...}</pre><p name="21b1" id="21b1" class="graf graf--p graf-after--pre">例如：</p><pre name="a1d7" id="a1d7" class="graf graf--pre graf-after--p">ages = {&#39;Chris&#39;: 48, &#39;Wil&#39;: 23, &#39;Snoopy&#39;: 52} <br>squares = {2: 4, 3: 9, 4: 16, 5: 25} <br>phone = {&#39;Pat&#39;: &#39;555-1212&#39;, &#39;Jenny&#39;: &#39;867-5309&#39;}</pre><p name="7ee4" id="7ee4" class="graf graf--p graf-after--pre">我们也可以创建空字典，例如：</p><pre name="3028" id="3028" class="graf graf--pre graf-after--p">empty_dict = {}</pre><p name="13ee" id="13ee" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">2. 根据关键词调用字典的储存的值</strong></p><p name="d108" id="d108" class="graf graf--p graf-after--p">考虑下面一个字典：</p><pre name="4f2d" id="4f2d" class="graf graf--pre graf-after--p">ages = {&#39;Chris&#39;: 48, &#39;Wil&#39;: 23, &#39;Snoopy&#39;: 52}</pre><p name="2325" id="2325" class="graf graf--p graf-after--pre">这个字典相当于下图中所示的结构。</p><figure name="0c46" id="0c46" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*5zeLjDyRel-palYv3LB-ow.png" data-width="1756" data-height="350" src="https://cdn-images-1.medium.com/max/800/1*5zeLjDyRel-palYv3LB-ow.png"></figure><p name="4dda" id="4dda" class="graf graf--p graf-after--figure">我们可以根据关键词来输出关键词对应的数值，引用的方法类似于列表的索引。例如：</p><pre name="96c6" id="96c6" class="graf graf--pre graf-after--p">ages[&#39;Chris&#39;]          # 48 <br>ages[‘Snoopy&#39;]         # 52</pre><p name="c906" id="c906" class="graf graf--p graf-after--pre">我们可以通过直接赋值更改列表中的数值。例如：</p><pre name="5f78" id="5f78" class="graf graf--pre graf-after--p">ages[&#39;Snoopy&#39;] = 18</pre><figure name="f0a8" id="f0a8" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*YOwIKRCeU99KO5PWhrmijw.png" data-width="1756" data-height="350" src="https://cdn-images-1.medium.com/max/800/1*YOwIKRCeU99KO5PWhrmijw.png"></figure><p name="fa7a" id="fa7a" class="graf graf--p graf-after--figure">我们也可以进行运算赋值，例如：</p><pre name="d56d" id="d56d" class="graf graf--pre graf-after--p">ages[&#39;Snoopy&#39;] -= 13</pre><figure name="8564" id="8564" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*5jh-4aO6fKtB8HtD7c9KMA.png" data-width="1756" data-height="350" src="https://cdn-images-1.medium.com/max/800/1*5jh-4aO6fKtB8HtD7c9KMA.png"></figure><p name="43cd" id="43cd" class="graf graf--p graf-after--figure">另外，我们只能输出字典中存在关键词对应的值，而不能输出字典中不存在的关键词的值。例如，如果我们输入下面的语句：</p><pre name="d5ac" id="d5ac" class="graf graf--pre graf-after--p">santas_age = ages[&#39;Santa Claus&#39;]</pre><p name="465b" id="465b" class="graf graf--p graf-after--pre">会得到报错为：</p><pre name="9399" id="9399" class="graf graf--pre graf-after--p">KeyError: &#39;Santa Claus&#39;</pre><p name="d424" id="d424" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">3. 检查关键词是否存在</strong></p><p name="6707" id="6707" class="graf graf--p graf-after--p">通过 in 语句和 not in 语句可以得到一个bool数值，通过该bool数值我们可以得到一个判断。例如：</p><pre name="1cdb" id="1cdb" class="graf graf--pre graf-after--p">&#39;Wil&#39; in ages                    # True<br>&#39;Santa Claus&#39; not in ages        # True</pre><p name="f96f" id="f96f" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">4. 在字典中添加新组合 pairs</strong></p><p name="928b" id="928b" class="graf graf--p graf-after--p">我们先创建一个空字典：</p><pre name="4a34" id="4a34" class="graf graf--pre graf-after--p">phone = {}</pre><p name="f83c" id="f83c" class="graf graf--p graf-after--pre">我们可以通过直接赋值的方法来向字典中添加新的组合。例如：</p><pre name="3cee" id="3cee" class="graf graf--pre graf-after--p">phone[&#39;Pat&#39;] = &#39;555-1212&#39; <br>phone[&#39;Jenny&#39;] = &#39;867-5309&#39;</pre><figure name="6f1e" id="6f1e" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*hNOxeZPWDQ289XtUNnM_ow.png" data-width="1508" data-height="170" src="https://cdn-images-1.medium.com/max/800/1*hNOxeZPWDQ289XtUNnM_ow.png"></figure><p name="7a41" id="7a41" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">5. 字典组成成分的可变性</strong></p><ul class="postList"><li name="5b93" id="5b93" class="graf graf--li graf-after--p">关键字 Key：关键字必须是 immutable 的，这意味着关键字只能是 int，float，以及string等类型。由于Key是不可修改的，所以如果想要更改 Key，那么就先要将旧的 Key 从字典中移除，然后再添加新的 Key。移除某个Key的方法是del语句：</li></ul><pre name="7ca1" id="7ca1" class="graf graf--pre graf-after--li">del age[&#39;Wil&#39;]</pre><ul class="postList"><li name="9cee" id="9cee" class="graf graf--li graf-after--pre">值 Value：可以是 immutable，也可以是 mutable。因此数值可以是int, float, string, lists, dictionaries等。</li><li name="0aa9" id="0aa9" class="graf graf--li graf-after--li">字典本身 ：字典本身是mutable的，这意味着字典的直接赋值并不是创建新的值，而是指向了原字典。</li></ul><p name="eb89" id="eb89" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">6. 通过函数改变值</strong></p><p name="0128" id="0128" class="graf graf--p graf-after--p">下面的代码实现了通过函数来改变字典内的数值的功能。例如：</p><pre name="5d43" id="5d43" class="graf graf--pre graf-after--p">def have_birthday(dict, name):<br>    print(f&quot;You&#39;re one year older, {name}!&quot;)<br>    dict[name] += 1 </pre><pre name="abe7" id="abe7" class="graf graf--pre graf-after--pre">def main():<br>    ages = {&#39;Chris&#39;: 48, &#39;Wil&#39;: 23, &#39;Snoopy&#39;: 52}<br>    print(ages)<br>    have_birthday(ages, &#39;Chris&#39;)<br>    print(ages)<br>    have_birthday(ages, ‘Snoopy&#39;) print(ages)</pre><p name="4e3c" id="4e3c" class="graf graf--p graf-after--pre">得到输出：</p><pre name="8bf7" id="8bf7" class="graf graf--pre graf-after--p">{&#39;Chris&#39;: 48, &#39;Wil&#39;: 23, &#39;Snoopy&#39;: 52} <br>You&#39;re one year older, Chris! <br>{&#39;Chris’: 49, &#39;Wil&#39;: 23, &#39;Snoopy&#39;: 52} <br>You&#39;re one year older, Snoopy! <br>{&#39;Chris’: 49, &#39;Wil&#39;: 23, ‘Snoopy’: 53}</pre><p name="8a07" id="8a07" class="graf graf--p graf-after--pre">7. 字典的方法</p><pre name="e008" id="e008" class="graf graf--pre graf-after--p">ages = {&#39;Chris&#39;: 48, &#39;Wil&#39;: 23, &#39;Snoopy&#39;: 52}</pre><ul class="postList"><li name="b624" id="b624" class="graf graf--li graf-after--pre">get(key)：返回字典中key对应的值。例如：</li></ul><pre name="a231" id="a231" class="graf graf--pre graf-after--li">print(ages.get(&#39;Chris&#39;))           # 48<br>print(ages.get(&#39;Santa Claus&#39;))     # None</pre><ul class="postList"><li name="bad3" id="bad3" class="graf graf--li graf-after--pre">keys()：返回所有的key。例如：</li></ul><pre name="1519" id="1519" class="graf graf--pre graf-after--li">list(ages.keys())                  # [&#39;Chris&#39;, &#39;Wil&#39;, ‘Snoopy&#39;]</pre><p name="8eda" id="8eda" class="graf graf--p graf-after--pre">以及：</p><pre name="9733" id="9733" class="graf graf--pre graf-after--p">for key in ages.keys(): <br>   print(f&quot;{key}, {ages[key]}&quot;)</pre><p name="1f37" id="1f37" class="graf graf--p graf-after--pre">得到输出：</p><pre name="deb8" id="deb8" class="graf graf--pre graf-after--p">Chris, 48 <br>Wil, 23 <br>Snoopy, 52</pre><ul class="postList"><li name="f61f" id="f61f" class="graf graf--li graf-after--pre">values()：返回所有的Values。例如：</li></ul><pre name="031a" id="031a" class="graf graf--pre graf-after--li">list(ages.values())            # [48, 23, 52]</pre><p name="f290" id="f290" class="graf graf--p graf-after--pre">以及：</p><pre name="5752" id="5752" class="graf graf--pre graf-after--p">for value in ages.values(): <br>    print(value)</pre><p name="99e4" id="99e4" class="graf graf--p graf-after--pre">得到输出：</p><pre name="80ae" id="80ae" class="graf graf--pre graf-after--p">48 <br>23 <br>52</pre><ul class="postList"><li name="8201" id="8201" class="graf graf--li graf-after--pre">pop(key)：移除字典中关键字为key的元素，返回该key对应的值。例如：</li></ul><pre name="80ac" id="80ac" class="graf graf--pre graf-after--li">ages.pop(&#39;Snoopy&#39;)           # 52<br>ages                         # {&#39;Chris&#39;: 48, &#39;Wil&#39;: 23}</pre><ul class="postList"><li name="24d8" id="24d8" class="graf graf--li graf-after--pre">clear()：清空字典。例如：</li></ul><pre name="a306" id="a306" class="graf graf--pre graf-after--li">ages.clear()<br>ages</pre><p name="8122" id="8122" class="graf graf--p graf-after--pre">得到输出：</p><pre name="6f45" id="6f45" class="graf graf--pre graf-after--p">{}</pre><ul class="postList"><li name="7dd6" id="7dd6" class="graf graf--li graf-after--pre">len(dict)函数：输出字典中含有的组合的个数。例如：</li></ul><pre name="a4b7" id="a4b7" class="graf graf--pre graf-after--li">len(ages)                   # 3</pre><ul class="postList"><li name="3710" id="3710" class="graf graf--li graf-after--pre">del语句：删除字典中某个key和它的值。例如：</li></ul><pre name="bcac" id="bcac" class="graf graf--pre graf-after--li">del ages[&#39;Snoopy&#39;]<br>ages</pre><p name="7c44" id="7c44" class="graf graf--p graf-after--pre">得到输出：</p><pre name="eef1" id="eef1" class="graf graf--pre graf-after--p">{&#39;Chris&#39;: 48, &#39;Wil&#39;: 23}</pre><p name="a13b" id="a13b" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">8. 关于字典的一些注意事项</strong></p><ul class="postList"><li name="1420" id="1420" class="graf graf--li graf-after--p">字典是单向的：我们不能通过字典的值来找到对应的关键字</li><li name="d425" id="d425" class="graf graf--li graf-after--li">值的唯一性：每个关键字对应的值确定且唯一</li></ul><p name="d4ab" id="d4ab" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">9. 列表和字典的对比</strong></p><p name="fa1c" id="fa1c" class="graf graf--p graf-after--p">我们已经了解了列表和字典，下面我们将二者做一个简单的比较。实际上，列表和字典的区别就是列表的关键字是从0～N的一个数列。例如我们有列表my_list和字典my_dict如下。</p><pre name="b00a" id="b00a" class="graf graf--pre graf-after--p">my_list = [‘a’, ‘b’, ‘c’]<br>my_dict = { ‘x’:’a’, ‘y’:’b, ‘z’:’c’ }</pre><figure name="2105" id="2105" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*qRTv8Egn3_gKO6eVKwR2pQ.png" data-width="1224" data-height="192" src="https://cdn-images-1.medium.com/max/800/1*qRTv8Egn3_gKO6eVKwR2pQ.png"></figure><ul class="postList"><li name="b61a" id="b61a" class="graf graf--li graf-after--figure">打印某个索引/关键字对应的值：</li></ul><pre name="9a52" id="9a52" class="graf graf--pre graf-after--li">print(my_list[1])<br>print(my_dict[‘y’])</pre><ul class="postList"><li name="602d" id="602d" class="graf graf--li graf-after--pre">遍历输出</li></ul><pre name="43f8" id="43f8" class="graf graf--pre graf-after--li">for i in range(len(my_list)):<br>     value = my_list[i]<br>     print(i, value)</pre><p name="bd93" id="bd93" class="graf graf--p graf-after--pre">以及，</p><pre name="b544" id="b544" class="graf graf--pre graf-after--p">for key in my_dict: <br>     value = my_dict[key] <br>     print(key, value)</pre><p name="6ff4" id="6ff4" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">10. 转置字典</strong></p><p name="7414" id="7414" class="graf graf--p graf-after--p">我们在刚才的讨论中说过，字典中某个关键字的值是唯一确定的，但是对于同一个值来说，却可能对应着多个关键字。我们通过列表来解决在转置字典的过程中的一一对应的问题。例如，我们希望转置如下字典：</p><pre name="bbbd" id="bbbd" class="graf graf--pre graf-after--p">ages = { &#39;Snoopy&#39;:50, &#39;Gary&#39;:70, ‘Ada&#39;:32, &#39;Wil&#39;:23, &#39;Adele&#39;:32, &#39;Lionel&#39;:32, &#39;Rihanna&#39;:32, &#39;Stephen&#39;:32 }</pre><p name="32dd" id="32dd" class="graf graf--p graf-after--pre">可以看出，字典中很多关键字对应的都是值32。在转置的过程中，我们将这些关键字放入同一个列表中即可。例如，得到的转置结果为：</p><pre name="c7ac" id="c7ac" class="graf graf--pre graf-after--p">reversed = { 50:[&#39;Snoopy&#39;], 70:[&#39;Gary&#39;], 32:[Ada&#39;, &#39;Adele&#39;, &#39;Lionel&#39;, &#39;Rihanna&#39;, &#39;Stephen’], 23:[&#39;Wil&#39;] }</pre><p name="db79" id="db79" class="graf graf--p graf-after--pre">11. XKCD颜色</p><p name="fc40" id="fc40" class="graf graf--p graf-after--p">XKCD颜色是一个调查，这个在线调查让志愿者观察一系列的颜色并且询问志愿者这些元素的名称。该数据集可以从<a href="http://web.stanford.edu/class/cs106a/lectures/17-NestedStructures/Lecture17.zip" data-href="http://web.stanford.edu/class/cs106a/lectures/17-NestedStructures/Lecture17.zip" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">链接</a>上下载，链接中包括了xkcd_colors.py，它就是我们所要编辑的文件。数据集为 xkcd-color.txt，数据集的内容（每行依次为：颜色名称，r值，g值，b值）如下所示：</p><pre name="f56c" id="f56c" class="graf graf--pre graf-after--p">pastel blue,72,100,175<br>baby blue,182,226,245<br>purple,130,64,234<br>blue,75,49,234<br>light blue,76,215,249<br>olive green,111,145,122<br>brown,88,70,1<br>pink,218,35,156<br>purple,154,42,159<br>purple,179,67,229<br>...</pre><p name="6740" id="6740" class="graf graf--p graf-after--pre">我们需要在load_data函数里面返回一个字典，这个字典的结构如下：</p><pre name="b4e0" id="b4e0" class="graf graf--pre graf-after--p">{ </pre><pre name="9c7b" id="9c7b" class="graf graf--pre graf-after--pre">&quot;clover green&quot;: [[100, 216, 135], [72, 218, 111], [57, 109, 40], [9, 190, 78], [4, 217, 90], [36, 164, 33], [85, 195, 120], [137, 207, 101], [155, 213, 167], [41, 141, 12], [35, 195, 118], [63, 169, 115], [2, 184, 86], [49, 189, 100], [147, 200, 8], [63, 160, 43], [87, 121, 8], [49, 183, 44], [61, 190, 119]], </pre><pre name="5a88" id="5a88" class="graf graf--pre graf-after--pre">&quot;sal&quot;: [[184, 207, 244], [48, 199, 109], [247, 4, 25], [6, 101, 127], [196, 124, 36], [148, 30, 23], [106, 51, 249], [186, 63, 96], [209, 234, 226], [115, 18, 254], [59, 251, 10], [209, 84, 209], [254, 164, 39], [154, 165, 137], [82, 196, 178], [120, 250, 248], [175, 59, 33], [67, 52, 126], [224, 211, 50], [9, 255, 249], [138, 43, 154], [218, 158, 7], [213, 79, 90]], </pre><pre name="d1c1" id="d1c1" class="graf graf--pre graf-after--pre">&quot;marzipan&quot;: [[202, 197, 102], [34, 80, 112], [127, 162, 51], [90, 171, 24], [134, 198, 156], [163, 138, 126], [212, 248, 154], [133, 25, 118], [75, 143, 86], [46, 108, 0], [9, 242, 107], [29, 120, 25], [237, 209, 155], [215, 82, 187], [200, 79, 52], [12, 78, 60], [18, 52, 183], [186, 61, 232], [169, 201, 232], [173, 216, 142]],</pre><pre name="e961" id="e961" class="graf graf--pre graf-after--pre">...<br>}</pre><p name="c6e4" id="c6e4" class="graf graf--p graf-after--pre">在load_data()函数中，这个函数的主要目的是读取并处理数据。原始的函数如下：</p><pre name="8f5f" id="8f5f" class="graf graf--pre graf-after--p">def load_data():<br>    data = {}<br>    return data</pre><p name="8e80" id="8e80" class="graf graf--p graf-after--pre">我们先来打开文件。为了避免忘记释放文件，我们在这里使用with语句：</p><pre name="d180" id="d180" class="graf graf--pre graf-after--p">def load_data():<br>    data = {}</pre><pre name="5dd1" id="5dd1" class="graf graf--pre graf-after--pre">    with open(&#39;./xkcd_color.txt&#39;) as file:<br>        # codes goes here #</pre><pre name="9643" id="9643" class="graf graf--pre graf-after--pre">    return data</pre><p name="453c" id="453c" class="graf graf--p graf-after--pre">（1）我们需要将每行数据处理为一个数列，因此有：</p><pre name="f95a" id="f95a" class="graf graf--pre graf-after--p">def load_data():<br>    data = {}</pre><pre name="87c8" id="87c8" class="graf graf--pre graf-after--pre">    with open(&#39;./xkcd-color.txt&#39;) as file:<br>        for line in file:<br>            line = line[:-1].strip()<br>            parts = line.split(&#39;,&#39;)<br>            col_name = parts[0]<br>            col_rgb = [int(parts[1]), int(parts[2]), int(parts[3])]<br>            if col_name not in data:<br>                data[col_name] = []<br>            data[col_name].append(col_rgb)</pre><pre name="9d86" id="9d86" class="graf graf--pre graf-after--pre">    return data</pre><p name="9546" id="9546" class="graf graf--p graf-after--pre">到这里，我们已经将数据处理完毕，下面是展示数据。</p><p name="9390" id="9390" class="graf graf--p graf-after--p">（2）为了方便，xkcd_colors.py中已经给出了plot_rgb(canvas, r, g, b)，这个函数可以在现有的画布上面画出颜色点。因此我们只需要向这个函数提供每个颜色点的rgb，即可自动在canvas上描绘出相应的数据。</p><p name="8a62" id="8a62" class="graf graf--p graf-after--p">此外，我们要实现的功能如下：</p><ul class="postList"><li name="cab3" id="cab3" class="graf graf--li graf-after--p">循环输出Color name:，在输出之后等待用户输入一个颜色名称（不论大小写都能识别）</li><li name="c0c5" id="c0c5" class="graf graf--li graf-after--li">如果用户输入的颜色不存在在数据集中，那么就没有任何变化</li><li name="98e5" id="98e5" class="graf graf--li graf-after--li">如果用户输入的是clear，那么就会清空画布上的所有内容</li><li name="e1c6" id="e1c6" class="graf graf--li graf-after--li">如果用户什么也没有输入，那么就退出程序</li><li name="c5e0" id="c5e0" class="graf graf--li graf-after--li">如果用户输入的颜色存在于数据集中，那么就通过plot_rgb函数绘制该颜色在字典中对应的所有颜色点在画布上。</li></ul><p name="a952" id="a952" class="graf graf--p graf-after--li">原始的main函数如下：</p><pre name="eaaf" id="eaaf" class="graf graf--pre graf-after--p">def main():<br>    # get a drawing canvas<br>    canvas = make_canvas(CANVAS_WIDTH, CANVAS_HEIGHT, &#39;XKCD Colors&#39;)<br><br>    dataset = load_data()</pre><p name="1083" id="1083" class="graf graf--p graf-after--pre">现在我们来实现上面所示的功能：</p><pre name="fdd2" id="fdd2" class="graf graf--pre graf-after--p">def main():<br>    # get a drawing canvas<br>    canvas = make_canvas(CANVAS_WIDTH, CANVAS_HEIGHT, &#39;XKCD Colors&#39;)<br><br>    dataset = load_data()</pre><pre name="4ad8" id="4ad8" class="graf graf--pre graf-after--pre">    while True:<br>        query = input(&quot;Color name: &quot;).lower()<br>        if query in dataset:<br>            for i in range(len(dataset[query])):<br>                 r = dataset[query][i][0]<br>                 g = dataset[query][i][1]<br>                 b = dataset[query][i][2]<br>                 plot_rgb(canvas, r, g, b)<br>        elif query == &quot;clear&quot;:<br>            canvas.delete(&quot;all&quot;)<br>        elif query == &#39;&#39;:<br>            break<br>        canvas.update()</pre><p name="825b" id="825b" class="graf graf--p graf-after--pre">注意，这里最后一句canvas.update()非常容易忽略，如果忽略的话会造成无法绘制的结果。</p><p name="6c43" id="6c43" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">二、嵌套结构 Nested Structure</strong></p><p name="9f8a" id="9f8a" class="graf graf--p graf-after--p">在Python中，我们将列表中嵌套字典和字典中嵌套列表的结构称为嵌套结构。例如在上面的SKCD颜色的例子中，load_data函数里面返回的字典就是一种嵌套结构。</p><p name="64df" id="64df" class="graf graf--p graf-after--p">有的时候，我们会希望将一个字典存储下来，这样我们需要使用这个字典的时候就可以直接调用该文件。在计算机中，用来储存字典的文件类型就是json文件。</p><p name="b722" id="b722" class="graf graf--p graf-after--p">在调用json文件的时候，我们先要导入json包。例如：</p><pre name="bbfd" id="bbfd" class="graf graf--pre graf-after--p">import json</pre><p name="b31b" id="b31b" class="graf graf--p graf-after--pre">在python中导入json文件的内容主要包括两个步骤，首先我们通过open函数打开文件，然后我们通过json.load函数来导入json文件中的内容。例如：</p><pre name="57a0" id="57a0" class="graf graf--pre graf-after--p">file = open(&#39;[...].json&#39;) <br>data = json.load(file)</pre><p name="8282" id="8282" class="graf graf--p graf-after--pre">比如，我们先通过Sublime编辑并且保存一个ages.json文件如下：</p><pre name="cd92" id="cd92" class="graf graf--pre graf-after--p">{<br>  &quot;Chris&quot;:48, <br>  &quot;Gary&quot;:70, <br>  &quot;Snoopy&quot;:52, <br>  &quot;Wil&quot;:23, <br>  &quot;Rihanna&quot;:32, <br>  &quot;Adele&quot;:32 <br>}</pre><p name="905e" id="905e" class="graf graf--p graf-after--pre">我们来执行下面的代码，就可以得到所有人姓名和年龄的输出。例如：</p><pre name="1aff" id="1aff" class="graf graf--pre graf-after--p">import json</pre><pre name="fe4e" id="fe4e" class="graf graf--pre graf-after--pre">def main():<br> file = open(&#39;ages.json&#39;)<br> data = json.load(file)<br> for name in data:<br>  age = data[name]<br>  print(f&#39;{name} is {age} years old.&#39;)<br> file.close()</pre><pre name="be17" id="be17" class="graf graf--pre graf-after--pre">if __name__ == &#39;__main__&#39;:<br>    main()</pre><p name="d3f5" id="d3f5" class="graf graf--p graf-after--pre">输出结果如下：</p><pre name="582d" id="582d" class="graf graf--pre graf-after--p graf--trailing">Chris is 48 years old.<br>Gary is 70 years old.<br>Snoopy is 52 years old.<br>Wil is 23 years old.<br>Rihanna is 32 years old.<br>Adele is 32 years old.</pre></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@adamedelweiss" class="p-author h-card">Adam Edelweiss</a> on <a href="https://medium.com/p/1105e14150ec"><time class="dt-published" datetime="2020-08-15T09:50:15.565Z">August 15, 2020</time></a>.</p><p><a href="https://medium.com/@adamedelweiss/python%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A16-%E5%AD%97%E5%85%B8-1105e14150ec" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 15, 2021.</p></footer></article></body></html>
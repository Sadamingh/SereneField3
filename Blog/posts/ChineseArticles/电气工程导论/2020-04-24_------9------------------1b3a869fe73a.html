<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>电气工程导论9 从逻辑门到计算机：二进制和加法器</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">电气工程导论9 从逻辑门到计算机：二进制和加法器</h1>
</header>
<section data-field="subtitle" class="p-summary">
系列：电气工程导论
</section>
<section data-field="body" class="e-content">
<section name="5499" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="bba5" id="bba5" class="graf graf--h3 graf--leading graf--title">电气工程导论9 从逻辑门到计算机：二进制和加法器</h3><figure name="6870" id="6870" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*CZ_svKpGKL9KzZrmcX2sTg.jpeg" data-width="1950" data-height="1300" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*CZ_svKpGKL9KzZrmcX2sTg.jpeg"></figure><p name="d328" id="d328" class="graf graf--p graf-after--figure">经过之前对晶体管的系统学习，我们下面来看一道例题。在这个例题中，我们假设晶体管的阈值电压是2V。我们需要判断的是，哪一个电路中的晶体管能够连通？</p><figure name="061a" id="061a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*N74eCpF5GCRoFYzu" data-width="1080" data-height="685" src="https://cdn-images-1.medium.com/max/800/0*N74eCpF5GCRoFYzu"></figure><p name="5f0a" id="5f0a" class="graf graf--p graf-after--figure">首先来看A，对于A来说，Gate端分压为0.5V，而Source端分压为4.5V，因此GS之间的电压大于阈值电压，晶体管能够连通。再来看B，对于B来说，Gate端分得的电压仍然为0.5V，但是由于A中的pMOS管在此处更改为了nMOS管，因此Source处分压为0V，GS电压差不超过2V，所以不能连通。C图中虽然GS两端电压等于2V，但是由于我们要求GS的电压差大于阈值电压，因此2V在这个我们的条件中是不足以促进晶体管连接的。最后，D图表示了一种情况，那就是Gate处的电压是高于Source的，在pMOS管中，这种反向电压不能连通晶体管。</p><p name="a5dd" id="a5dd" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">一、晶体管是否连通的逻辑判断</strong></p><p name="5795" id="5795" class="graf graf--p graf-after--p">在之前的讨论中，我们了解了晶体管连通判断的Voltage/circuit level：</p><ul class="postList"><li name="644b" id="644b" class="graf graf--li graf-after--p">An NMOS turns on when VGS &gt; Vth</li><li name="ad03" id="ad03" class="graf graf--li graf-after--li">A PMOS turns on when VGS &lt; -Vth</li></ul><p name="6721" id="6721" class="graf graf--p graf-after--li">在数字逻辑电路中，我们另外还有一种记录方法，那就是通过逻辑形式来判断开关的闭合与否。通常来说，我们在nMOS管中Source是接GND的（逻辑值0），在pMOS管中的Source是接Vdd的（逻辑值1）。那么，就有如下推论：</p><ul class="postList"><li name="495b" id="495b" class="graf graf--li graf-after--p">An NMOS turns on when input is high（Value = 1）</li><li name="7e9b" id="7e9b" class="graf graf--li graf-after--li">A PMOS turns on when input is low（Value = 0）</li></ul><p name="d49b" id="d49b" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">二、二进制数的概念</strong></p><p name="d724" id="d724" class="graf graf--p graf-after--p">关于二进制数和十进制数、十六进制数的转换，互联网上有很多资料可以参考，这里不再赘述。另外可以参考C语言部分对这一部分的讲解。</p><p name="4df7" id="4df7" class="graf graf--p graf-after--p">关于二进制数计算器，在Mac和Windows上我们都可以找到相应的程序员计算器，没有必要在互联网上寻找在线计算器。</p><figure name="ccec" id="ccec" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*mNm7O7yKv6nFbm5O" data-width="785" data-height="946" src="https://cdn-images-1.medium.com/max/800/0*mNm7O7yKv6nFbm5O"></figure><p name="27ac" id="27ac" class="graf graf--p graf-after--figure">汇编语言角度的二进制理解（包括了溢出和进位的区别）、减法和相反数的计算，可以参考<a href="https://mp.weixin.qq.com/s?__biz=MzI5NzU4MTQ5Mg==&amp;mid=2247484830&amp;idx=6&amp;sn=5bd78cedfc70f34581b75fb4356c50a0&amp;chksm=ecb3ab45dbc422532d1a19fdcf30b41bfeb6b06825ce275f77bf43946ee2e616ba037ee2caa1&amp;token=1755667003&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-href="https://mp.weixin.qq.com/s?__biz=MzI5NzU4MTQ5Mg==&amp;mid=2247484830&amp;idx=6&amp;sn=5bd78cedfc70f34581b75fb4356c50a0&amp;chksm=ecb3ab45dbc422532d1a19fdcf30b41bfeb6b06825ce275f77bf43946ee2e616ba037ee2caa1&amp;token=1755667003&amp;lang=zh_CN&amp;scene=21#wechat_redirect" class="markup--anchor markup--p-anchor" rel="noopener nofollow noopener" target="_blank">数字电路模拟10 专题：汇编语言的减法和正负比较</a>。</p><p name="90b0" id="90b0" class="graf graf--p graf-after--p">关于有符号数溢出和无符号数的溢出（又叫做进位），可以参考下面的这个图片。</p><figure name="2267" id="2267" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*Cqol9YqeTTaPw6Ac" data-width="1080" data-height="842" src="https://cdn-images-1.medium.com/max/800/0*Cqol9YqeTTaPw6Ac"></figure><p name="00d0" id="00d0" class="graf graf--p graf-after--figure">在编程领域，我们同样通常可以对字符进行运算，这些运算是以二进制的形式进行的。</p><pre name="d285" id="d285" class="graf graf--pre graf-after--p">unsigned char x = 253;<br>char y = x;<br>print(y);</pre><pre name="0114" id="0114" class="graf graf--pre graf-after--pre">char x = -1;<br>int y = x;<br>print(y);</pre><p name="95dc" id="95dc" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">三、加法器Adder</strong></p><p name="4abe" id="4abe" class="graf graf--p graf-after--p">我们之前在<a href="https://mp.weixin.qq.com/s?__biz=MzI5NzU4MTQ5Mg==&amp;mid=2247484830&amp;idx=6&amp;sn=5bd78cedfc70f34581b75fb4356c50a0&amp;chksm=ecb3ab45dbc422532d1a19fdcf30b41bfeb6b06825ce275f77bf43946ee2e616ba037ee2caa1&amp;token=1755667003&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-href="https://mp.weixin.qq.com/s?__biz=MzI5NzU4MTQ5Mg==&amp;mid=2247484830&amp;idx=6&amp;sn=5bd78cedfc70f34581b75fb4356c50a0&amp;chksm=ecb3ab45dbc422532d1a19fdcf30b41bfeb6b06825ce275f77bf43946ee2e616ba037ee2caa1&amp;token=1755667003&amp;lang=zh_CN&amp;scene=21#wechat_redirect" class="markup--anchor markup--p-anchor" rel="noopener nofollow noopener" target="_blank">数字电路模拟10 专题：汇编语言的减法和正负比较</a>已经讨论过，所有的计算机计算（减法、乘法、除法、以及其他高级运算）都是通过加法进行的，计算机并不能直接进行这些计算。加法是如此常用，以至于我们有必要直接从硬件的角度规定一个加法器的形式。</p><p name="2e7c" id="2e7c" class="graf graf--p graf-after--p">我们可以通过观察加法计算的真值表构造一个半加器Half Adder，这涉及到对前面逻辑门知识的一次运用。对于两个一位数A和B相加加法器，我们需要硬件上满足下面的真值表。</p><figure name="3924" id="3924" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*CM1lp2iEqgwaQtWP" data-width="60" data-height="21" src="https://cdn-images-1.medium.com/max/800/0*CM1lp2iEqgwaQtWP"></figure><figure name="89ef" id="89ef" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="0*T571aowynjDqkh_W.png" data-width="1196" data-height="428" src="https://cdn-images-1.medium.com/max/800/0*T571aowynjDqkh_W.png"></figure><p name="64cb" id="64cb" class="graf graf--p graf-after--figure">通过上面的表，我们发现C输出为A和B的AND（与），S输出为A和B的XOR（异或）。</p><figure name="ca18" id="ca18" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*exIz6Hm6lP0nOFqc" data-width="866" data-height="518" src="https://cdn-images-1.medium.com/max/800/0*exIz6Hm6lP0nOFqc"></figure><p name="05c5" id="05c5" class="graf graf--p graf-after--figure">但是上面的这种方法构建出来的加法器有一个问题，那就是C和S表示的数字并不是完备的。在上面的讨论中，C和S只能表示0，1，和2这三个数。但是在实际上，C和S应该还能表示3（二进制为11）这个数。为了解决这个问题，我们需要在上面的半加器上进行处理，构建新的加法器。</p><p name="14cd" id="14cd" class="graf graf--p graf-after--p">实际上，在新的加法器上，我们只是需要将电路稍微做出处理，让它符合下面的真值表即可。在这里，为了构造出3，我们需要再引入一位新的输入。我们可以将这一位新的输入理解为和A和B等价的输入，但是传统上它被定义为低位进位Cin。它指的是如果这一位被记作1，那么在A和B求和的结果的最低位加1。反之，如果这一位被记作0，则不存在低位进位，直接输出的就是A和B的和。根据上面的规则，我们有如下真值表：</p><figure name="8d5a" id="8d5a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*ZoGw96SE2MY3dhC5.png" data-width="1196" data-height="734" src="https://cdn-images-1.medium.com/max/800/0*ZoGw96SE2MY3dhC5.png"></figure><p name="d419" id="d419" class="graf graf--p graf-after--figure">这种新的加法器被称为全加器。可以看出的是，这种新的加法器比之前的半加器更加复杂，主要原因是三个输入共同决定了两个输出。我们可以将这个问题拆解成两个部分，第一部分是和半加器一样的A和B相加，第二部分是将半加器求到的结果再和低位进位位Cin进行相加。将A和B相加后，输入变为如下真值表：</p><figure name="9e17" id="9e17" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*SnrDncMezhZeJI5C.png" data-width="1196" data-height="734" src="https://cdn-images-1.medium.com/max/800/0*SnrDncMezhZeJI5C.png"></figure><p name="43c3" id="43c3" class="graf graf--p graf-after--figure">观察S1位，Cin位和S位，我们发现这三者之间是符合XOR关系的，所以，首先，我们需要在S1和Cin的后面加上一个XOR门，它的运算结果就是S。</p><figure name="d8be" id="d8be" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*VhlxhObS5BlQWDg2" data-width="984" data-height="470" src="https://cdn-images-1.medium.com/max/800/0*VhlxhObS5BlQWDg2"></figure><p name="2df8" id="2df8" class="graf graf--p graf-after--figure">我们在来看进位问题。同样地，如果S1位和Cin位取AND运算之后求得到的结果（我们在下图中计为C’）是1，那么就说明发生了进位。这时我们需要进行一个判断，如果C位上的值S1位和Cin做AND运算求得的值有一个是1，那么就需要将Cout的值置为1。我们来看第一个过程，我们先对S1位和Cin做AND运算：</p><figure name="ce39" id="ce39" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*-nf4w_vdgpCP0dgv" data-width="1080" data-height="604" src="https://cdn-images-1.medium.com/max/800/0*-nf4w_vdgpCP0dgv"></figure><p name="8e73" id="8e73" class="graf graf--p graf-after--figure">我们再来看第二个过程，也就是对C和C’以及Cout来说，需要满足下面的真值表：</p><figure name="9792" id="9792" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*F-QZ-HdarqmZQc5l.png" data-width="1196" data-height="348" src="https://cdn-images-1.medium.com/max/800/0*F-QZ-HdarqmZQc5l.png"></figure><p name="0627" id="0627" class="graf graf--p graf-after--figure">很明显的，只需要我们在C和C’做OR运算，就可以满足上面的真值表。因此我们在C和C’后面加上一个OR门。</p><figure name="656d" id="656d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*scKX1bOqXTkDG25Q" data-width="1080" data-height="456" src="https://cdn-images-1.medium.com/max/800/0*scKX1bOqXTkDG25Q"></figure><p name="b609" id="b609" class="graf graf--p graf-after--figure">因此，如图所示的电路就满足了我们在上面提出的全加器的真值表。通过上面的图，我们可以看出一个全加器是由两个半加器封装而成的。另外，我们也对全加器进行封装，保留三个输入口和两个输出口，并且各个接口的位置如下图所示。</p><figure name="b0c0" id="b0c0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*940BSkXJQGDOZ6lr" data-width="1080" data-height="743" src="https://cdn-images-1.medium.com/max/800/0*940BSkXJQGDOZ6lr"></figure><p name="b244" id="b244" class="graf graf--p graf-after--figure">我们计算两个八位二进制数之和是通过如下的方式连接加法器。通过下面的图，我们能够重新理解低位进位的含义。通过连接Cin和Cout两个接口，低位的进位能够在高位上体现，这就是我们将Cout称为低位进位的原因。</p><figure name="fa4b" id="fa4b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*-c4IBhORosoCpNzA" data-width="488" data-height="1400" src="https://cdn-images-1.medium.com/max/800/0*-c4IBhORosoCpNzA"></figure><p name="8e17" id="8e17" class="graf graf--p graf-after--figure">上图中的八位加法器运算等式为：</p><figure name="d083" id="d083" class="graf graf--figure graf-after--p graf--trailing"><img class="graf-image" data-image-id="0*km_e1Opqm3ePWyj-.png" data-width="1526" data-height="662" src="https://cdn-images-1.medium.com/max/800/0*km_e1Opqm3ePWyj-.png"></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@adamedelweiss" class="p-author h-card">Adam Edelweiss</a> on <a href="https://medium.com/p/1b3a869fe73a"><time class="dt-published" datetime="2020-04-24T18:12:06.697Z">April 24, 2020</time></a>.</p><p><a href="https://medium.com/@adamedelweiss/%E7%94%B5%E6%B0%94%E5%B7%A5%E7%A8%8B%E5%AF%BC%E8%AE%BA9-%E4%BB%8E%E9%80%BB%E8%BE%91%E9%97%A8%E5%88%B0%E8%AE%A1%E7%AE%97%E6%9C%BA-%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%92%8C%E5%8A%A0%E6%B3%95%E5%99%A8-1b3a869fe73a" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 15, 2021.</p></footer></article></body></html>
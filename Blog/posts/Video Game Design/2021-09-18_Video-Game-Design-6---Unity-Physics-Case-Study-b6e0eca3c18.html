<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Video Game Design 6 | Unity Physics Case Study</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Video Game Design 6 | Unity Physics Case Study</h1>
</header>
<section data-field="subtitle" class="p-summary">
Series: Video Game Design
</section>
<section data-field="body" class="e-content">
<section name="b7c4" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="c89d" id="c89d" class="graf graf--h3 graf--leading graf--title">Video Game Design 6 | Unity Physics Case Study</h3><figure name="54c0" id="54c0" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="0*605mTY89CtZRIw22.png" data-width="1216" data-height="672" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/0*605mTY89CtZRIw22.png"></figure><ol class="postList"><li name="224f" id="224f" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">Unity Physics</strong></li></ol><p name="9717" id="9717" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">(1) Clone the Unity Template</strong></p><p name="5b9d" id="5b9d" class="graf graf--p graf-after--p">Before we start, let’s first clone the template <code class="markup--code markup--p-code">CS4455_M1_Support</code> from GitHub. You can find it <a href="https://github.gatech.edu/IMTC/CS4455_M1_Support" data-href="https://github.gatech.edu/IMTC/CS4455_M1_Support" class="markup--anchor markup--p-anchor" rel="noopener ugc nofollow noopener" target="_blank">here</a>. Note that we must have the GitHub enterprise account for Gatech before we clone this file.</p><p name="6d8b" id="6d8b" class="graf graf--p graf-after--p">After having cloned this template, we can open it as a project through Unity Hub. If you aren’t happy with your submitted M1, you can use the original GitHub project.</p><p name="09da" id="09da" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(2) Basic Rigidbodies with Collision Events</strong></p><p name="6062" id="6062" class="graf graf--p graf-after--p">Before implementing this task, we have to look at the crates that are already in the scene. They have a <code class="markup--code markup--p-code">CrateCollisionReporter</code> script that you might find of interest for completing this task. The script is,</p><pre name="fe24" id="fe24" class="graf graf--pre graf-after--p">void OnCollisionEnter(Collision c)<br>{<br>    if (c.impulse.magnitude &gt; 0.25f)<br>    {<br>        //we&#39;ll just use the first contact point for simplicity<br>        EventManager.TriggerEvent&lt;BoxCollisionEvent, Vector3, float&gt;(c.contacts[0].point, c.impulse.magnitude);<br>    }<br>}</pre><p name="b155" id="b155" class="graf graf--p graf-after--pre">Here, we can find out that we can create an audio event by function <code class="markup--code markup--p-code">OnCollisionEnter</code> . <code class="markup--code markup--p-code">c.impulse.magnitude</code> means that in order to have this event, we must have an impulse with a value larger than <code class="markup--code markup--p-code">0.25</code>. <code class="markup--code markup--p-code">EventManager.TriggerEvent</code> is called inside the <code class="markup--code markup--p-code">OnCollisionEnter</code> function to trigger an event, and the event <code class="markup--code markup--p-code">BoxCollisionEvent</code> has already been provided in <code class="markup--code markup--p-code">BoxCollisionEvent.cs</code>. This event will be consumed by the <code class="markup--code markup--p-code">AudioEventManager</code> in the <code class="markup--code markup--p-code">AudioEventManager.cs</code> script. You may need to read these scripts carefully before the implementation of the blue balls. Note that the blue material has already been provided.</p><p name="6bdb" id="6bdb" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(3) Physics Layers Example</strong></p><p name="7a82" id="7a82" class="graf graf--p graf-after--p">To select the layer of a <code class="markup--code markup--p-code">rigidbody</code>, we have to select the object and go to the Inspect &gt; Layer. Then click on it to choose a layer. If there is need of a new layer, you can select <code class="markup--code markup--p-code">Add Layer...</code> to create a new one.</p><figure name="a3c6" id="a3c6" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*opjrGz1IXeMSKe8ApUzt1Q.png" data-width="1444" data-height="194" src="https://cdn-images-1.medium.com/max/800/1*opjrGz1IXeMSKe8ApUzt1Q.png"></figure><p name="883f" id="883f" class="graf graf--p graf-after--figure">The reason why we have to add layers to an object is that we can then choose the collision relationships between different layers. For example, some objects in the same layer can not collide with each other but they can still be collided by the objects from another layer. To edit this relationship, we have to select Edit &gt; Project Settings &gt; Physics &gt; Layer Collision Matrix,</p><figure name="b99a" id="b99a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*i7hKrlIJaUHm7jtbVTH88A.png" data-width="1446" data-height="520" src="https://cdn-images-1.medium.com/max/800/1*i7hKrlIJaUHm7jtbVTH88A.png"></figure><p name="d068" id="d068" class="graf graf--p graf-after--figure">You can check or uncheck the boxes to allow or disable the collisions between objects between different layers.</p><p name="d4cd" id="d4cd" class="graf graf--p graf-after--p">In this Physics view, we can also change something else. For example,</p><ul class="postList"><li name="2929" id="2929" class="graf graf--li graf-after--p">gravity acceleration</li><li name="2003" id="2003" class="graf graf--li graf-after--li">bounce threshold</li><li name="e8a5" id="e8a5" class="graf graf--li graf-after--li">sleep threshold</li></ul><p name="55e7" id="55e7" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">(4) Compound Collider for Complex Geometry</strong></p><p name="c4be" id="c4be" class="graf graf--p graf-after--p">Open Unity’s Asset Store by going to Window &gt; Asset Store &gt; Search online. Then search for Free Japanese Mask (looks like a stone mask of a fox). Select Add to My Assets &gt; Accept. Then go back to the Unity editor, open Package Manager, then choose My Assets.</p><figure name="6726" id="6726" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*4t2iuBf3gLgD3kxyeIeRbg.png" data-width="1588" data-height="842" src="https://cdn-images-1.medium.com/max/800/1*4t2iuBf3gLgD3kxyeIeRbg.png"></figure><p name="9984" id="9984" class="graf graf--p graf-after--figure">Then click on Download, and then select Import to import it. Place it in your scene somewhere and scale size uniformly by <code class="markup--code markup--p-code">10.0</code>. Next, add a <code class="markup--code markup--p-code">rigidbody</code> controller to the Kitsune GameObject. If we play the game now, you will find that the mask directly passes through the ground. This is because it has no colliders and we have to create one for it by the compound collider approach. To make a GameObject invisible, we have to uncheck Inspector &gt; Mesh Renderer. We have to add these colliders as the child objects of the mask to create a compound collider.</p><p name="6546" id="6546" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(5) Chain with Joint Constraints</strong></p><p name="3ec5" id="3ec5" class="graf graf--p graf-after--p">To create a fixed joint, we have to select the object, and then choose Inspector &gt; Add Component &gt; Fixed Joint. Then it will be basically pinned in place. To make an ordinary joint, we have to select Inspector &gt; Add Component &gt; Configurable Joint.</p><p name="e2a7" id="e2a7" class="graf graf--p graf-after--p">For each of the configurable joints, we have to modify in Inspector &gt; Configurable Joint,</p><pre name="abd5" id="abd5" class="graf graf--pre graf-after--p">X Motion Locked<br>Y Motion Locked<br>Z Motion Locked<br>Angular X Motion Free<br>Angular Y Motion Free<br>Angular Z Motion Free</pre><p name="1f0c" id="1f0c" class="graf graf--p graf-after--pre">And also, we have to select the Connect body for each of them. The Connect Body should be the object that connects the current object at the top.</p><p name="8668" id="8668" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(6) Mecanim-Animated Kinematic Elevator</strong></p><p name="1446" id="1446" class="graf graf--p graf-after--p">Add an empty GameObject and name it ElevatorRoot. Create a <strong class="markup--strong markup--p-strong">blue </strong>child cube GameObject called Elevator with zeroed out transform position and rotation. If you don’t like the placement of the elevator you can move the “ElevatorRoot” without redoing the animation. You get similar benefits if you want to make a prefab of the elevator and clone it multiple times.</p><p name="eade" id="eade" class="graf graf--p graf-after--p">Then scale it to look more like an elevator platform. Add to the Elevator a <code class="markup--code markup--p-code">rigidbody</code> component configured to be <code class="markup--code markup--p-code">kinematic</code> (by checking <code class="markup--code markup--p-code">is Kinematic</code>). With the Elevator object selected in the Hierarchy, open the Animation Window. Click the “Create” button within the Animation Window. Save the animation as <code class="markup--code markup--p-code">Elevator</code> under <code class="markup--code markup--p-code">Assets/Animations</code>. Confirm that the Elevator GameObject now has an Animator component with Inspector &gt; Animarot &gt; Controller of the same name assigned.</p><figure name="13ac" id="13ac" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*uwDhWH8UYxJMW1-hw-XOWA.png" data-width="1378" data-height="494" src="https://cdn-images-1.medium.com/max/800/1*uwDhWH8UYxJMW1-hw-XOWA.png"></figure><p name="0395" id="0395" class="graf graf--p graf-after--figure">On the Animation Window, add a property of Transform-&gt;Position (click the plus to add it).</p><figure name="ac89" id="ac89" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*QeItGdoO-dYe0phYxd6_jA.png" data-width="1588" data-height="1072" src="https://cdn-images-1.medium.com/max/800/1*QeItGdoO-dYe0phYxd6_jA.png"></figure><p name="d363" id="d363" class="graf graf--p graf-after--figure">Add a keyframe midway through your animation so that the Elevator rises and then goes back to the original position. Confirm the animation is set to loop (Inspector view of the Elevator animation selected in the Project View Assets). Test it out.</p><p name="b5c4" id="b5c4" class="graf graf--p graf-after--p">You may notice that the speed is quite fast and we need to adjust the speed multiplier in the <strong class="markup--strong markup--p-strong">Animator</strong> window view (by Window &gt; Animation &gt; Animator) to slow things down. This can be done by clicking on the Elevator in the Animator view and then reduce the value of Inspector &gt; Speed.</p><p name="e522" id="e522" class="graf graf--p graf-after--p">We also need to add a <strong class="markup--strong markup--p-strong">red </strong><code class="markup--code markup--p-code">rigidbody</code> sphere on top of the elevator that gets pushed up and then falls repeatedly as the elevator goes up and down.</p><p name="4a5c" id="4a5c" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(7) Customized Center of Mass</strong></p><p name="f7a2" id="f7a2" class="graf graf--p graf-after--p">Create a <strong class="markup--strong markup--p-strong">green </strong>Weeble Wobble or Punching Bozo. These are rounded bottom-heavy toys that cannot be knocked over. Make it out of a capsule collider and a custom center of mass via,</p><pre name="cdbe" id="cdbe" class="graf graf--pre graf-after--p">Project: Assets/Scripts/Utility/RigidbodyCenterOfMass </pre><p name="f6b3" id="f6b3" class="graf graf--p graf-after--pre">This can be done by selecting Inspector &gt; Add Component &gt; Rigidbody Center Of Mass. MonoBehaviorwith accompanying <code class="markup--code markup--p-code">RigidbodyCenterofMassHandler</code> editor extension. Change the center of mass lower than its original place, and then this will be working. Be sure and read the script source to understand how it works and place it at an angle so it is rocking back and forth at the start of the game.</p><p name="1376" id="1376" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(8) Default/Slippy Friction</strong></p><p name="3515" id="3515" class="graf graf--p graf-after--p">Create a <strong class="markup--strong markup--p-strong">purple </strong><code class="markup--code markup--p-code">rigidbody</code> box and place it on the ramp named BetterRamp. Confirm that it does not slide down the ramp.</p><p name="07b9" id="07b9" class="graf graf--p graf-after--p">Then let’s create a <strong class="markup--strong markup--p-strong">green </strong><code class="markup--code markup--p-code">rigidbody</code> box next to the purple one. Add a new PhysicsMaterial in Asset &gt; physics_materials by right-clicking in the asset, and then choose Create &gt; Physic Material. Modify it to have <code class="markup--code markup--p-code">0.1</code> dynamic and static friction, and <code class="markup--code markup--p-code">Friction Combine</code> set to <code class="markup--code markup--p-code">minimum</code>.</p><figure name="6609" id="6609" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*zpflkoKKcePbfpv4ad_icg.png" data-width="1314" data-height="384" src="https://cdn-images-1.medium.com/max/800/1*zpflkoKKcePbfpv4ad_icg.png"></figure><p name="428b" id="428b" class="graf graf--p graf-after--figure">Add this physic material to the green <code class="markup--code markup--p-code">rigidbody</code> box by Inspector &gt; Box Collider &gt; Material. Finally, test out the result.</p><p name="4740" id="4740" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(9) Bouncy Rigidbody</strong></p><p name="b4e6" id="b4e6" class="graf graf--p graf-after--p">Create an <strong class="markup--strong markup--p-strong">orange </strong><code class="markup--code markup--p-code">rigidbody</code> sphere. Assign a new PhysicsMaterial that has a <code class="markup--code markup--p-code">0.9</code> bounciness and <code class="markup--code markup--p-code">Bounce Combine</code> set to <code class="markup--code markup--p-code">maximum</code>. Place it a bit above the ground. You should see the ball bouncing when the game plays.</p><p name="d00e" id="d00e" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(10) Ragdoll</strong></p><p name="126e" id="126e" class="graf graf--p graf-after--p">Place the existing ‘Y_Bot’ asset in the scene right above the nearest hurdle from,</p><pre name="815b" id="815b" class="graf graf--pre graf-after--p">Project: Assets/ModelsAndAnimations/YBot with Animations/Y_Bot/Y_Bot</pre><p name="395f" id="395f" class="graf graf--p graf-after--pre">Run the Ragdoll Wizard via,</p><pre name="2239" id="2239" class="graf graf--pre graf-after--p">Edit Menu:GameObject-&gt;3D Object-&gt;Ragdoll...</pre><p name="1ca4" id="1ca4" class="graf graf--p graf-after--pre">Assign the bones as detailed in the image below. Make sure <code class="markup--code markup--p-code">Y_Bot</code> is aligned such that he flops over the hurdle as he falls when the game starts.</p><figure name="ecb0" id="ecb0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*GlmHChFDeLsCLcqV9mtAWg.png" data-width="1626" data-height="1122" src="https://cdn-images-1.medium.com/max/800/1*GlmHChFDeLsCLcqV9mtAWg.png"></figure><p name="3a3e" id="3a3e" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">(11) Scripting Forces</strong></p><p name="c07f" id="c07f" class="graf graf--p graf-after--p">Make a <strong class="markup--strong markup--p-strong">black </strong>click beetle or jumping bean out of a capsule. You will need to write a MonoBehavior script that intermittently applies a force to the <code class="markup--code markup--p-code">rigidbody</code> in <code class="markup--code markup--p-code">FixedUpdate()</code>.</p><p name="2ecc" id="2ecc" class="graf graf--p graf-after--p">An impulse or instant velocity change for the force type will give a good jump effect. Liberal use of the Random functions will make the behavior more realistic (e.g. bounded but random time between jumps, jump angle and force magnitude, etc.). Also, jumps should only occur when the GameObject is on the ground.</p><p name="0fd3" id="0fd3" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">2. Submission</strong></p><p name="7521" id="7521" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(1) Update the HUD</strong></p><p name="824f" id="824f" class="graf graf--p graf-after--p">Update the HUD to show your name. Edit the Name game object under the “FramerateCounter — NAME TEXT IS HERE”.</p><p name="e66f" id="e66f" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(2) Modification Check List</strong></p><ul class="postList"><li name="196a" id="196a" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">[5 pt]</strong> three (3) blue <code class="markup--code markup--li-code">rigidbody</code> spheres with collision sounds</li><li name="439e" id="439e" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">[5 pt]</strong> three (3) red <code class="markup--code markup--li-code">rigidbody</code> spheres that don’t collide with one another</li><li name="4d15" id="4d15" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">[10 pt]</strong> Asset Store model “Free Japanese Mask” with custom compound collider</li><li name="b857" id="b857" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">[10 pt]</strong> yellow jointed chain made of at least five (5) <code class="markup--code markup--li-code">rigidbody</code> GameObjects</li><li name="2015" id="2015" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">[10 pt]</strong> blue kinematic <code class="markup--code markup--li-code">rigidbody</code> elevator using Mecanim animation with red <code class="markup--code markup--li-code">rigidbody</code> sphere going for a ride</li><li name="c3c3" id="c3c3" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">[10 pt]</strong> green Weeble Wobble/Punching Bozo that tilts but can’t be knocked over</li><li name="71f6" id="71f6" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">[5 pt]</strong> a purple cube with <code class="markup--code markup--li-code">rigidbody</code> box that does not slide down the ramp</li><li name="ab73" id="ab73" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">[5 pt]</strong> green cube with <code class="markup--code markup--li-code">rigidbody</code> box that does slide down the ramp</li><li name="8f55" id="8f55" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">[5 pt]</strong> orange <code class="markup--code markup--li-code">rigidbody</code> sphere that bounces</li><li name="3347" id="3347" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">[15 pt]</strong> <code class="markup--code markup--li-code">Y_Bot</code> ragdoll that collapses over the hurdle</li><li name="cbd4" id="cbd4" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">[20 pt]</strong> black click beetle or jumping bean that jumps intermittently</li></ul><p name="6dbc" id="6dbc" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">(3) Game Building</strong></p><ul class="postList"><li name="81c9" id="81c9" class="graf graf--li graf-after--p">File &gt; Save to save the file</li><li name="a4df" id="a4df" class="graf graf--li graf-after--li">Select File &gt; Build Settings</li><li name="dc10" id="dc10" class="graf graf--li graf-after--li">Choose MacOS, Intel 64-bit + Apple Silicon</li><li name="2651" id="2651" class="graf graf--li graf-after--li">Create a new folder named <code class="markup--code markup--li-code">Last_FirstInit_m2</code> (replace with your name Info). This is the root folder.</li><li name="ebc5" id="ebc5" class="graf graf--li graf-after--li">Create a path <code class="markup--code markup--li-code">&lt;root&gt;/Build/OSX</code> . Name the build <code class="markup--code markup--li-code">Last_FirstInit_m2</code> and save it here.</li><li name="3579" id="3579" class="graf graf--li graf-after--li">Select File &gt; Build Settings again</li><li name="4052" id="4052" class="graf graf--li graf-after--li">Choose Windows, x86_64</li><li name="7050" id="7050" class="graf graf--li graf-after--li">Build it in the path <code class="markup--code markup--li-code">&lt;root&gt;/Build</code> and name it <code class="markup--code markup--li-code">Windows</code> .</li></ul><p name="2801" id="2801" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">(4) Create </strong><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">UNTESTED</strong></code><strong class="markup--strong markup--p-strong"> file</strong></p><p name="4af4" id="4af4" class="graf graf--p graf-after--p">Because one of the builds (<code class="markup--code markup--p-code">.app</code> or <code class="markup--code markup--p-code">.exe</code>) has not been tested, we should add a file <code class="markup--code markup--p-code">UNTESTED</code> to the folder, if we don’t test it.</p><pre name="0dac" id="0dac" class="graf graf--pre graf-after--p">$ touch UNTESTED</pre><p name="c410" id="c410" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">(5) Clean Up the Root</strong></p><p name="d3fe" id="d3fe" class="graf graf--p graf-after--p">We have to clean the root before we submit.</p><pre name="69f7" id="69f7" class="graf graf--pre graf-after--p graf--trailing">$ rm -rf .git<br>$ rm -rf Library<br>$ rm -rf temp<br>$ rm -rf Obj<br>$ rm -rf Logs<br>$ rm *.sln<br>$ rm *.csproj</pre></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@adamedelweiss" class="p-author h-card">Adam Edelweiss</a> on <a href="https://medium.com/p/b6e0eca3c18"><time class="dt-published" datetime="2021-09-18T15:58:24.178Z">September 18, 2021</time></a>.</p><p><a href="https://medium.com/@adamedelweiss/video-game-design-6-unity-physics-case-study-b6e0eca3c18" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 15, 2021.</p></footer></article></body></html>
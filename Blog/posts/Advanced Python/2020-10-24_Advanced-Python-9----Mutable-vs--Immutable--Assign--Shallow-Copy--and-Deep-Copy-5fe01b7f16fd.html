<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Advanced Python 9  | Mutable vs. Immutable, Assign, Shallow Copy, and Deep Copy</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Advanced Python 9  | Mutable vs. Immutable, Assign, Shallow Copy, and Deep Copy</h1>
</header>
<section data-field="subtitle" class="p-summary">
Series: Advanced Python
</section>
<section data-field="body" class="e-content">
<section name="6829" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="6366" id="6366" class="graf graf--h3 graf--leading graf--title">Advanced Python 9 | Mutable vs. Immutable, Assign, Shallow Copy, and Deep Copy</h3><figure name="546c" id="546c" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*Z5FazIAQHYJTWmaKyhsmHQ.png" data-width="1616" data-height="686" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*Z5FazIAQHYJTWmaKyhsmHQ.png"><figcaption class="imageCaption">Origin From <a href="https://dribbble.com/shots/12228737-GitHub-Sign-in" data-href="https://dribbble.com/shots/12228737-GitHub-Sign-in" class="markup--anchor markup--figure-anchor" rel="nofollow noopener" target="_blank">https://dribbble.com/shots/12228737-GitHub-Sign-in</a></figcaption></figure><ol class="postList"><li name="5616" id="5616" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">Mutable and Immutable Objects</strong></li></ol><p name="7412" id="7412" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">(1) The Definition of the Mutable Objects</strong></p><p name="8d98" id="8d98" class="graf graf--p graf-after--p">An immutable object means that if we change the value of this object, then the address of this object <strong class="markup--strong markup--p-strong">will not be changed</strong>.</p><p name="bc63" id="bc63" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(2) The Definition of the Immutable Objects</strong></p><p name="76d4" id="76d4" class="graf graf--p graf-after--p">An immutable object means that if we change the value of this object, then the address of this object <strong class="markup--strong markup--p-strong">will be changed</strong>.</p><p name="8634" id="8634" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(3) Mutable and Immutable Datatypes in Python</strong></p><pre name="d6b5" id="d6b5" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">Mutable</strong>: list, dictionary, set<br><strong class="markup--strong markup--pre-strong">Immutable</strong>: integer, float, boolean, tuple, string</pre><p name="1281" id="1281" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">(4) Testing Mutable and Immutable</strong></p><p name="43bb" id="43bb" class="graf graf--p graf-after--p">Based on the definition of the mutable and immutable, we can create a function for us to show if an object is mutable or not by changing its value and then check it’s address.</p><figure name="ffb0" id="ffb0" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/Sadamingh/dd447612964474ffe542ad69f4982d86.js"></script></figure><p name="3a4a" id="3a4a" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">2. Assign, Shallow Copy, and Deep Copy</strong></p><p name="f1f5" id="f1f5" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(1) Acknowledge</strong></p><p name="ee37" id="ee37" class="graf graf--p graf-after--p">People find it hard to understand the difference between the assignment statement and the copy (including copy, shallow copy, and deep copy) statement. Thanks to the <a href="https://github.com/parrt/lolviz" data-href="https://github.com/parrt/lolviz" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">lolviz</a> package from Terence Parr, we can now state this confusing problem in a visualized and clear way.</p><p name="fb77" id="fb77" class="graf graf--p graf-after--p">Install lolviz,</p><pre name="9a4d" id="9a4d" class="graf graf--pre graf-after--p">$ brew install graphviz<br>$ pip install lolviz</pre><p name="37d3" id="37d3" class="graf graf--p graf-after--pre">Import packages,</p><pre name="77b3" id="77b3" class="graf graf--pre graf-after--p">from lolviz import *<br>from copy import *</pre><p name="73c8" id="73c8" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">(2) Assign, Shallow Copy, Deepcopy</strong></p><p name="1b7a" id="1b7a" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Assign</strong> in the python means to point two variables to the same mutable object. For immutable objects, they will give the value to a new immutable object.</p><p name="1b9f" id="1b9f" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Shallow Copy</strong> in the python is exactly the copy() function (or method) which means to point two variables to two different mutable objects, but if there’s any mutable objects inside that these two different objects, they will not be copied and they are still pointed by these two different objects.</p><p name="e4f9" id="e4f9" class="graf graf--p graf-after--p">Deepcopy means to copy everything, including objects in the objects.</p><ul class="postList"><li name="2fda" id="2fda" class="graf graf--li graf-after--p">For a <strong class="markup--strong markup--li-strong">immutable object</strong>, assign, shallow copy, and deepcopy mean exactly the same thing,</li></ul><pre name="3149" id="3149" class="graf graf--pre graf-after--li">X = 1<br>Y = X <br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="bfef" id="bfef" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*C50bZiOXuVYDaYxHdzNzYw.png" data-width="1142" data-height="166" src="https://cdn-images-1.medium.com/max/800/1*C50bZiOXuVYDaYxHdzNzYw.png"></figure><pre name="d323" id="d323" class="graf graf--pre graf-after--figure">X = 1<br>Y = copy(X) <br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="090d" id="090d" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*C50bZiOXuVYDaYxHdzNzYw.png" data-width="1142" data-height="166" src="https://cdn-images-1.medium.com/max/800/1*C50bZiOXuVYDaYxHdzNzYw.png"></figure><pre name="d030" id="d030" class="graf graf--pre graf-after--figure">X = 1<br>Y = deepcopy(X) <br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="b5e1" id="b5e1" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*C50bZiOXuVYDaYxHdzNzYw.png" data-width="1142" data-height="166" src="https://cdn-images-1.medium.com/max/800/1*C50bZiOXuVYDaYxHdzNzYw.png"></figure><ul class="postList"><li name="46ac" id="46ac" class="graf graf--li graf-after--figure">For a immutable object, assign means to point the variable to exactly the same object, whereas shallow copy means only copy the overall mutable object, but not the other mutable objects inside this object. Deepcopy means to copy both the overall mutable object and the mutable objects inside the data type. Here are some examples,</li></ul><pre name="cd7e" id="cd7e" class="graf graf--pre graf-after--li">X = [1,2]<br>Y = X <br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="9c2f" id="9c2f" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*Rgf3Q1gWgTS681jIdP6x8Q.png" data-width="1024" data-height="180" src="https://cdn-images-1.medium.com/max/800/1*Rgf3Q1gWgTS681jIdP6x8Q.png"></figure><pre name="203e" id="203e" class="graf graf--pre graf-after--figure">X = [1,2]<br>Y = copy(X)<br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="cb1c" id="cb1c" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*kk_RMq82ML_-CT2NtJ_nTA.png" data-width="1024" data-height="208" src="https://cdn-images-1.medium.com/max/800/1*kk_RMq82ML_-CT2NtJ_nTA.png"></figure><pre name="a19f" id="a19f" class="graf graf--pre graf-after--figure">X = [1,2]<br>Y = X.copy()<br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="0b4f" id="0b4f" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*kk_RMq82ML_-CT2NtJ_nTA.png" data-width="1024" data-height="208" src="https://cdn-images-1.medium.com/max/800/1*kk_RMq82ML_-CT2NtJ_nTA.png"></figure><pre name="2baa" id="2baa" class="graf graf--pre graf-after--figure">X = [1,2]<br>Y = deepcopy(X)<br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="593a" id="593a" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*SHQH9vfL_ocMgm6hEIjTXg.png" data-width="1024" data-height="208" src="https://cdn-images-1.medium.com/max/800/1*SHQH9vfL_ocMgm6hEIjTXg.png"></figure><pre name="e73d" id="e73d" class="graf graf--pre graf-after--figure">X = [[1,2],[3,4]]<br>Y = X <br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="68f0" id="68f0" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*EEoSAquZi7RAncP2ENAtyg.png" data-width="1024" data-height="208" src="https://cdn-images-1.medium.com/max/800/1*EEoSAquZi7RAncP2ENAtyg.png"></figure><pre name="a1a1" id="a1a1" class="graf graf--pre graf-after--figure">X[0] = [&#39;p&#39;, &#39;q&#39;]<br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="7f8e" id="7f8e" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*pDh6rKiwS4BriVQnqSIfNw.png" data-width="1024" data-height="208" src="https://cdn-images-1.medium.com/max/800/1*pDh6rKiwS4BriVQnqSIfNw.png"></figure><pre name="8b2f" id="8b2f" class="graf graf--pre graf-after--figure">X = [[1,2],[3,4]]<br>Y = X.copy()<br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="5438" id="5438" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*HUfXafBhVCU51z5yKTAqMA.png" data-width="1024" data-height="232" src="https://cdn-images-1.medium.com/max/800/1*HUfXafBhVCU51z5yKTAqMA.png"></figure><pre name="903b" id="903b" class="graf graf--pre graf-after--figure">X[0] = [&#39;p&#39;, &#39;q&#39;]<br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="3f0d" id="3f0d" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*IUMTPUi_3IjpYuuWCphoFw.png" data-width="1024" data-height="324" src="https://cdn-images-1.medium.com/max/800/1*IUMTPUi_3IjpYuuWCphoFw.png"></figure><pre name="b193" id="b193" class="graf graf--pre graf-after--figure">X = [[1,2],[3,4]]<br>Y = deepcopy(X)<br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="5d18" id="5d18" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*AjXyVv0-9AV7pzHemth9hw.png" data-width="1024" data-height="418" src="https://cdn-images-1.medium.com/max/800/1*AjXyVv0-9AV7pzHemth9hw.png"></figure><pre name="9a5a" id="9a5a" class="graf graf--pre graf-after--figure">X[0] = [&#39;p&#39;, &#39;q&#39;]<br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="3380" id="3380" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*dk--o00XQrp0fcBplr9PtQ.png" data-width="1024" data-height="418" src="https://cdn-images-1.medium.com/max/800/1*dk--o00XQrp0fcBplr9PtQ.png"></figure><p name="3060" id="3060" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">(3) Practice</strong></p><p name="f124" id="f124" class="graf graf--p graf-after--p">View the following two code blocks and find the difference in their data structure.</p><pre name="8ed6" id="8ed6" class="graf graf--pre graf-after--p">X = [[1,[1,2]],&#39;a&#39;,&#39;b&#39;]<br>Y = copy(X)<br>Y[2] = [&#39;p&#39;]<br>X = copy(Y)<br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><p name="349a" id="349a" class="graf graf--p graf-after--pre">and</p><pre name="3c89" id="3c89" class="graf graf--pre graf-after--p">X = [[1,[1,2]],&#39;a&#39;,&#39;b&#39;]<br>Y = X<br>Y[2] = [&#39;p&#39;]<br>X = Y<br>callviz(varnames=[&#39;X&#39;,&#39;Y&#39;])</pre><figure name="8543" id="8543" class="graf graf--figure graf-after--pre graf--trailing"><img class="graf-image" data-image-id="1*0AdeGcsnS05My-C0--4oIA.png" data-width="1166" data-height="310" src="https://cdn-images-1.medium.com/max/800/1*0AdeGcsnS05My-C0--4oIA.png"><figcaption class="imageCaption"><strong class="markup--strong markup--figure-strong">Data Structures</strong> (Left for CodeBlock #1, Right for CodeBlock #2)</figcaption></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@adamedelweiss" class="p-author h-card">Adam Edelweiss</a> on <a href="https://medium.com/p/5fe01b7f16fd"><time class="dt-published" datetime="2020-10-24T15:50:32.523Z">October 24, 2020</time></a>.</p><p><a href="https://medium.com/@adamedelweiss/advanced-python-9-mutable-vs-immutable-assign-shallow-copy-and-deep-copy-5fe01b7f16fd" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 15, 2021.</p></footer></article></body></html>
<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Relational Database 11 | Schema Refinement, Norm Forms</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Relational Database 11 | Schema Refinement, Norm Forms</h1>
</header>
<section data-field="subtitle" class="p-summary">
Series: Relational Database
</section>
<section data-field="body" class="e-content">
<section name="7165" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="e1e4" id="e1e4" class="graf graf--h3 graf--leading graf--title">Relational Database 11 | Schema Refinement, Norm Forms</h3><figure name="2d4b" id="2d4b" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*3IaCF_vbefdstmWFpZxCRw.png" data-width="1600" data-height="1200" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*3IaCF_vbefdstmWFpZxCRw.png"></figure><ol class="postList"><li name="65c4" id="65c4" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">Schema Refinement</strong></li></ol><p name="0e86" id="0e86" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">(1) The Definition of the Schema</strong></p><p name="6033" id="6033" class="graf graf--p graf-after--p">A <strong class="markup--strong markup--p-strong">schema</strong> is a collection of database objects including tables, views, triggers, stored procedures, indexes, etc. It helps to organize the database objects into logical groups to make them more manageable. Also, schema can be treated as a dictionary with all the information objects of the database.</p><p name="2f76" id="2f76" class="graf graf--p graf-after--p">To see the schema information of all the objects in the current database,</p><pre name="d6a7" id="d6a7" class="graf graf--pre graf-after--p">SELECT *<br>FROM information_schema.columns;</pre><p name="9739" id="9739" class="graf graf--p graf-after--pre">Or we can choose to see the schema for a specific table,</p><pre name="a3af" id="a3af" class="graf graf--pre graf-after--p">SELECT *<br>FROM information_schema.columns<br>WHERE table_name = &#39;boats&#39;;</pre><p name="c190" id="c190" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">(2) Data Redundancy Problems</strong></p><p name="5371" id="5371" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Data redundancy</strong> occurs when the same piece of data exists in multiple places, whereas <strong class="markup--strong markup--p-strong">data inconsistency</strong> is when the same data exists in different formats in multiple tables. The consequences of the data redundancy are always not serious compared with the data inconsistency problem.</p><p name="deec" id="deec" class="graf graf--p graf-after--p">Commonly, there are four possible problems of the data redundancy,</p><ul class="postList"><li name="1f59" id="1f59" class="graf graf--li graf-after--p">Redundant Storage</li></ul><p name="8414" id="8414" class="graf graf--p graf-after--li">This means the same information is stored by multiple times and they take up the storage repeatedly.</p><ul class="postList"><li name="842e" id="842e" class="graf graf--li graf-after--p">Update Anomalies</li></ul><p name="1065" id="1065" class="graf graf--p graf-after--li">If one copy of repeated data is updated, an inconsistency is created unless all copies are updated.</p><pre name="afec" id="afec" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">Before:</strong> students<br>-------------------------------------------------<br>name       department       sid           gid    <br>-------------------------------------------------<br>Rick         Economy       12345          102<br>Rick         Economy       12345          102</pre><pre name="254d" id="254d" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">Query:</strong><br>UPDATE students SET gid = 101 WHERE name = &#39;Rick&#39;;</pre><pre name="3d71" id="3d71" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">After:</strong> students<br>-------------------------------------------------<br>name       department       sid           gid    <br>-------------------------------------------------<br>Rick         Economy       12345          101<br>Rick         Economy       12345          102</pre><p name="35c4" id="35c4" class="graf graf--p graf-after--pre">Note that it must be updated at least 2 times or there will be inconsistent data in the database.</p><ul class="postList"><li name="e882" id="e882" class="graf graf--li graf-after--p">Insert anomalies</li></ul><p name="0d0e" id="0d0e" class="graf graf--p graf-after--li">It may not be possible to store certain information unless some other, unrelated, information is stored as well.</p><pre name="d1e4" id="d1e4" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">Before:</strong> students (gid NOT NULL)<br>-------------------------------------------------<br>name       department       sid           gid    <br>-------------------------------------------------<br>Rick         Economy       12345          102</pre><pre name="5250" id="5250" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">Query:</strong><br>INSERT INTO students VALUES (&#39;Nick&#39;, &#39;Economy&#39;, 12321, NULL);</pre><pre name="e781" id="e781" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">After:</strong> ERROR, can not insert. </pre><p name="1cb9" id="1cb9" class="graf graf--p graf-after--pre">Note that this can be discovered, but however, in practice, we have handreds of records to insert at one time and this can lead to database inconsistencies due to omission.</p><ul class="postList"><li name="dbbb" id="dbbb" class="graf graf--li graf-after--p">Delete anomalies</li></ul><p name="642f" id="642f" class="graf graf--p graf-after--li">It may not be possible to delete certain information without losing some other, unrelated. Information as well. For example, for the following table, if we don’t know the sid of the single student to delete but we can know that this student is from group 101 and department Economy. If we delete with these conditions, some other students can be deleted because of that.</p><pre name="b1b9" id="b1b9" class="graf graf--pre graf-after--p">Suppose we want to delete Wolski.</pre><pre name="a174" id="a174" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">Before:</strong> students (gid NOT NULL)<br>-------------------------------------------------<br>name       department       sid           gid    <br>-------------------------------------------------<br>Rick         Economy       12345          102<br>Bruchs        Math         11235          101<br>Wolski       Economy       12234          101<br>Nina         Economy       15324          101</pre><pre name="9903" id="9903" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">Query:</strong><br>DELETE FROM students WHERE department = &#39;Economy&#39; AND gid = 101;</pre><pre name="97e2" id="97e2" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">After:</strong> students (gid NOT NULL)<br>-------------------------------------------------<br>name       department       sid           gid    <br>-------------------------------------------------<br>Rick         Economy       12345          102<br>Bruchs        Math         11235          101</pre><p name="a01f" id="a01f" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">2. Decomposition</strong></p><p name="e638" id="e638" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(1) The Definition of Decomposition</strong></p><p name="3a74" id="3a74" class="graf graf--p graf-after--p">The decomposition is a way through which we can deal with the data redundancy problems. It is defined as the process of breaking down in parts or elements. It replaces a relation with a collection of <strong class="markup--strong markup--p-strong">smaller relations</strong>.</p><p name="eda2" id="eda2" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(2) Properties of the Decomposition</strong></p><ul class="postList"><li name="cc2d" id="cc2d" class="graf graf--li graf-after--p">Lossless Decomposition</li></ul><p name="8003" id="8003" class="graf graf--p graf-after--li">Decomposition must be lossless. It means that the information should not get lost from the relation that is decomposed.</p><ul class="postList"><li name="b310" id="b310" class="graf graf--li graf-after--p">Dependency Preservation</li></ul><p name="3b10" id="3b10" class="graf graf--p graf-after--li">Dependency is an important constraint on the database. Every dependency must be satisfied by at least one decomposed table. This decomposition property can only be done by maintaining the functional dependency.</p><ul class="postList"><li name="24ab" id="24ab" class="graf graf--li graf-after--p">Lack of Data Redundancy</li></ul><p name="ef92" id="ef92" class="graf graf--p graf-after--li">The proper decomposition should not suffer from any data redundancy.</p><p name="3779" id="3779" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(3) Armstrong’s Axiom Introduction</strong></p><p name="0cbe" id="0cbe" class="graf graf--p graf-after--p">The term Armstrong axioms refer to the sound and complete set of inference rules or axioms. When X,Y, and Z are sets of attributes over a relation schema R, then (we only have to know these three rules),</p><ul class="postList"><li name="13ff" id="13ff" class="graf graf--li graf-after--p">Reflectivity: If Y ⊆ X, then X ⇒ Y.</li><li name="cd1c" id="cd1c" class="graf graf--li graf-after--li">Augmentation: If X ⇒ Y, then XZ ⇒ YZ for any given Z.</li><li name="0ed5" id="0ed5" class="graf graf--li graf-after--li">Transitivity: If X ⇒ Y and Y ⇒ Z, then X ⇒ Z.</li></ul><p name="5744" id="5744" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">(4) First Normal Form (1NF)</strong></p><p name="eac5" id="eac5" class="graf graf--p graf-after--p">A relation in the 1NF should satisfies the following properties,</p><ul class="postList"><li name="9f4c" id="9f4c" class="graf graf--li graf-after--p">A table has a primary key.</li><li name="5c5b" id="5c5b" class="graf graf--li graf-after--li">A table has no repeating attributes or groups attributes.</li></ul><p name="67fd" id="67fd" class="graf graf--p graf-after--li">To conduct the 1NF to a relationship, we have to do the following actions:</p><ul class="postList"><li name="b970" id="b970" class="graf graf--li graf-after--p">Delete repeated values</li><li name="2670" id="2670" class="graf graf--li graf-after--li">Split columns with more than one values per record</li></ul><p name="e753" id="e753" class="graf graf--p graf-after--li">Example 1. PRIMARY KEY = ‘sid, gid’</p><pre name="9bde" id="9bde" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">Without 1NF:</strong> students (sid NOT NULL)<br>-----------------------------------------<br>name           sid             gid       <br>-----------------------------------------<br>Rick          12345          101,102     <br>Bruchs        11235          101,102     <br>Bruchs        11235          101,102<br>Wolski        12234            101       <br>Nina          15324            101</pre><pre name="ef01" id="ef01" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">Steps of 1NF:</strong><br>- Delete repeated values: delete record #3<br>- Split records in rid</pre><pre name="4a7c" id="4a7c" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">With 1NF:</strong> students (sid NOT NULL)<br>-----------------------------------------<br>name           sid             gid       <br>-----------------------------------------<br>Rick          12345            101   <br>Rick          12345            102<br>Bruchs        11235            101<br>Bruchs        11235            102     <br>Wolski        12234            101       <br>Nina          15324            101</pre><p name="4cf4" id="4cf4" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">Problems of 1NF:</strong></p><p name="70d6" id="70d6" class="graf graf--p graf-after--p">Although there’s no Data Redundancy problems in 1NF, however, there can be insert/delete/update anomalies.</p><p name="11a7" id="11a7" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(5) Second Normal Form (2NF)</strong></p><p name="294c" id="294c" class="graf graf--p graf-after--p">When there’re two or more entries in the PRIMARY KEY, and only a subset of some entries of the PRIMARY KEY can be represented as the PRIMARY KEY for some columns. Then there can be insert/delete/update anomalies.</p><p name="52e6" id="52e6" class="graf graf--p graf-after--p">Detection:</p><pre name="b456" id="b456" class="graf graf--pre graf-after--p">Subset of PRIMARY KEY ⇒ columns</pre><p name="cbd5" id="cbd5" class="graf graf--p graf-after--pre">To conduct the 2NF to a relationship, we have to do the following actions:</p><ul class="postList"><li name="bc44" id="bc44" class="graf graf--li graf-after--p">Make sure the relationship satisfies 1NF</li><li name="91c2" id="91c2" class="graf graf--li graf-after--li">Find a subset that can determine a column</li><li name="3f28" id="3f28" class="graf graf--li graf-after--li">Split the relationship into smaller relationships based on the PRIMARY KEY</li><li name="bb96" id="bb96" class="graf graf--li graf-after--li">Make sure the relationship satisfies 1NF</li></ul><p name="0c8d" id="0c8d" class="graf graf--p graf-after--li">Example 2. PRIMARY KEY = ‘sid’</p><pre name="91d8" id="91d8" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">With 1NF:</strong> students (sid NOT NULL)<br>----------------------------------------<br>name           sid             gid      <br>----------------------------------------<br>Rick          12345            101      <br>Rick          12345            102      <br>Bruchs        11235            101      <br>Bruchs        11235            102      <br>Wolski        12234            101     <br>Nina          15324            101  </pre><pre name="4a53" id="4a53" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">Steps of 2NF:</strong><br>- note that sid ⇒ name<br>- split the relationship<br>- maintain 1NF</pre><pre name="2e05" id="2e05" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">With 2NF:</strong> studentid (sid NOT NULL)<br>-------------------<br>sid        name<br>-------------------<br>12345      Rick      <br>11235      Bruchs            <br>12234      Wolski           <br>15324      Nina</pre><pre name="9026" id="9026" class="graf graf--pre graf-after--pre">----------------<br>sid        gid<br>----------------<br>12345      101<br>12345      102<br>11235      101<br>11235      102<br>12234      101<br>15324      101</pre><p name="3d00" id="3d00" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">(6) Third Normal Form (3NF)</strong></p><p name="ed2f" id="ed2f" class="graf graf--p graf-after--p">Even when there’s only one entry in the PRIMARY KEY, some of the columns in the relationship can have the functional dependency problem,</p><pre name="3005" id="3005" class="graf graf--pre graf-after--p">some columns ⇒ other columns</pre><p name="ca47" id="ca47" class="graf graf--p graf-after--pre">Thus, we can split the table so there’s won’t any update anomalies.</p><p name="d402" id="d402" class="graf graf--p graf-after--p">Example 3. PRIMARY KEY 1= ‘sid’, PRIMARY KEY 2= ‘level’</p><pre name="1051" id="1051" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">With 2NF:</strong> studentid (sid NOT NULL)<br>----------------------------------------------<br>sid        name      level       scholarship<br>----------------------------------------------<br>12345      Rick        l2           3,000<br>11235      Bruchs      l3           5,000<br>12234      Wolski      l2           3,000<br>15324      Nina        l4           8,000     </pre><pre name="79cb" id="79cb" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">With 3NF:</strong> studentid (sid NOT NULL)<br>-------------------------------<br>sid        name      level     <br>-------------------------------<br>12345      Rick        l2      <br>11235      Bruchs      l3      <br>12234      Wolski      l2       <br>15324      Nina        l4      </pre><pre name="7784" id="7784" class="graf graf--pre graf-after--pre graf--trailing">---------------------------<br>level       scholarship<br>---------------------------<br>l2             3,000<br>l3             5,000<br>l4             8,000</pre></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@adamedelweiss" class="p-author h-card">Adam Edelweiss</a> on <a href="https://medium.com/p/4145ea8ba8fd"><time class="dt-published" datetime="2020-12-07T07:58:47.387Z">December 7, 2020</time></a>.</p><p><a href="https://medium.com/@adamedelweiss/relational-database-11-schema-refinement-norm-forms-4145ea8ba8fd" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 15, 2021.</p></footer></article></body></html>